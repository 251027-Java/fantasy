

<div class="min-h-screen bg-gradient-to-br from-slate-900 via-neutral-600 to-slate-900">
      <app-navbar/>

      <div class="max-w-4xl mx-auto px-6 pt-24 pb-12">
        <div class="text-center mb-16">
          <h2 class="text-5xl font-bold text-white mb-4">
            Let's find your League.
          </h2>
          <p class="text-xl text-white/70">
            Search by username and choose your league from the list below.
          </p>
        </div>


        <div class="flex flex-row justify-between">
          <div hlmCardContent>
                <form [formGroup]="searchControl" (ngSubmit)="retrieveLeagues()" class="space-y-6">

                  <hlm-form-field class="space-y-2">

                      <label hlmLabel for="user" class="font-medium text-white">
                      Sleeper Username
                      </label>

                      <input
                          hlmInput
                          id="user"
                          placeholder="Enter your username"
                          required
                          formControlName="user"
                          class="w-full bg-gray-900 text-white"
                      />

                      @if(error){
                        <hlm-error class="text-red-600 text-sm">
                            Previous username could not generate any leagues
                        </hlm-error>
                      }@else {
                        
                        <hlm-error class="text-red-600 text-sm">
                            You must enter a valid usernames
                        </hlm-error>
                      }

                  </hlm-form-field>
                </form>
                <button hlmBtn (click)="retrieveLeagues()" class="hidden">This should appear to the right</button>
            </div>
            <div>
              @for (user of userSearchList; track userSearchList) {

                <button hlmBtn (click)="removeUserFromSearch(user)"><ng-icon class="text-red-400" name="lucideX" />{{user}}</button>
              }
            </div>
          </div>

        

        <!-- Conditional loadings for the scroll box -->
        <div class="scrollbox">

          @if (loading) {
         
            <div class="flex items-center justify-center min-h-[400px]">
              <div class="text-white text-2xl flex items-center gap-3">
                <div class="w-8 h-8 border-4 border-purple-400 border-t-transparent rounded-full animate-spin"></div>
                <span>Loading cards...</span>
              </div>
            </div>
         
          }
          @else if(error && cardList.length == 0){

              <div class="flex items-center justify-center min-h-[400px]">
                <div class="text-white text-2xl flex items-center gap-3">
                  <!-- <div class="w-8 h-8 border-4 border-purple-400 border-t-transparent rounded-full animate-spin"></div -->>
                  <span>ERROR, user does not exist</span>
                </div>
              </div>


          }
          @else if(emptyListUser){
                          <div class="flex items-center justify-center min-h-[400px]">
                <div class="text-white text-2xl flex items-center gap-3">
                  <!-- <div class="w-8 h-8 border-4 border-purple-400 border-t-transparent rounded-full animate-spin"></div -->
                  <span>No searches added.</span>
                  <span>Please enter a new username</span>
                </div>
              </div>
          }
          @else {
                <div class="grid grid-cols-3 gap-2">
                  @for (card of cardList; track card.id) {

                      <section
                        class="w-full max-w-sm rounded-2xl shadow-xl 
                              bg-gray-900 border border-gray-700 
                              text-gray-100 transition-all duration-300 
                              
                              hover:-translate-y-1 hover:outline-2 
                              hover:outline-white hover:outline-offset-4
                              "
                        hlmCard
                        (click)="viewLeague(card)"
                        (mouseenter)="setHover(card.id)"
                        (mouseleave)="clearHover()"
                      >
                        <div hlmCardHeader class="flex flex-col items-center justify-center p-6 space-y-1">
                            <h3 hlmCardTitle class="text-xl font-semibold tracking-tight text-white">
                              {{ card.title }}
                            </h3>
                            <p hlmCardDescription class="text-sm text-gray-400 text-center">
                              {{ card.description }}
                            </p>
                        </div>

                        <!-- <div hlmCardContent class="p-6 pt-0">
                            <p class="text-sm text-gray-300 leading-relaxed">
                              This is the main content area for the {{ card.title }} league summary.
                            </p>
                        </div> -->

                        <div hlmCardFooter class="p-6 pt-4">
                            @if(hoveredCardId == card.id){
                              <div class="">
                                Users in league:
                                @for(user of card.users; track user){
                                  <h1 class=" text-blue-400 font-extrabold 
                                          [text-shadow:
                                              0_0_2px_#fff,              
                                              0_0_10px_rgb(96_165_250),    
                                              0_0_20px_rgb(96_165_250)     
                                          ]
                                          pb-1">
                                    {{user}}
                                </h1>
                                }
                            
                            <button
                                hlmBtn
                                (click)="viewLeague(card)"
                                class="w-full bg-blue-500 hover:bg-blue-400 text-white font-medium py-2 rounded-lg transition-colors duration-200"
                              >
                                {{ card.buttonText }}
                              </button>
                            </div>
                          }
                        </div>
                      </section>
                  }
                </div>
          }

            </div>


          <!-- <app-scroll-card
            *ngFor="let card of cards"
            [card]="card"
            (visibilityChange)="onVisibilityChange($event)"
          ></app-scroll-card> -->

      </div>
    </div>
